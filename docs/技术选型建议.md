# 小鼠行为监测系统 - 技术选型建议

## 1. Python数据采集端技术选型

### 推荐方案：OpenCV + YOLO + DeepSORT + MediaPipe

#### 核心组件：

**1. OpenCV (计算机视觉基础库)**
- **License**: BSD-3-Clause（宽松开源许可）
- **优点**: 成熟稳定、功能全面、社区活跃、支持多种摄像头
- **适配**: 提供视频流处理、图像预处理、基础图像操作

**2. YOLO (目标检测)**
- **推荐版本**: YOLOv8 (Ultralytics)
- **License**: AGPL-3.0（需注意商业使用）
- **优点**: 实时性好、精度高、支持自定义训练
- **适配**: 用于小鼠检测，可通过标注数据训练适应垫料环境
- **缺点**: 商业使用需考虑License限制

**3. DeepSORT (多目标追踪)**
- **License**: GPL-3.0
- **优点**: 多目标追踪效果好、身份保持能力强
- **适配**: 解决5只小鼠同时追踪问题
- **缺点**: 在遮挡严重时可能出现ID切换

**4. MediaPipe (行为识别辅助)**
- **License**: Apache-2.0（宽松开源许可）
- **优点**: Google开源、轻量级、支持姿态估计
- **适配**: 辅助识别挠鼻、抽搐等细微动作

#### 替代方案考虑：

**MMDetection + MMTracking (OpenMMLab)**
- **License**: Apache-2.0（更宽松）
- **优点**: 学术界认可度高、模型丰富、易于扩展
- **缺点**: 学习曲线较陡峭

### 人工标注支持：

**推荐工具**: CVAT (Computer Vision Annotation Tool)
- **License**: MIT（宽松开源许可）
- **功能**: 支持视频标注、多类别标注、团队协作
- **集成**: 可导出YOLO格式数据用于模型训练

## 2. Spring Boot后端技术选型

### 推荐脚手架：RuoYi-Vue-Plus

#### 选择理由：
- **完整的RBAC权限管理**: 支持用户、角色、菜单、部门管理
- **"三员"管理**: 系统管理员、安全管理员、审计管理员分离
- **丰富的基础功能**: 
  - 数据权限控制
  - 操作日志记录
  - 系统监控
  - 代码生成器
  - 定时任务
- **技术栈现代化**: Spring Boot 3.x + Spring Security + MyBatis-Plus
- **License**: MIT（宽松开源许可）

#### 核心特性：
- **安全性**: 集成Spring Security，支持JWT认证
- **数据库**: 支持MySQL、PostgreSQL等主流数据库
- **缓存**: 集成Redis缓存
- **文档**: 集成Swagger/Knife4j API文档
- **监控**: 集成Spring Boot Admin

### 替代方案：

**Pig (基于Spring Cloud Alibaba)**
- **优点**: 微服务架构、功能更丰富
- **缺点**: 复杂度较高，适合大型项目

## 3. 其他组件选型

### 数据库：MySQL 8.0+
- **理由**: 成熟稳定、性能优秀、社区支持好
- **特性**: 支持JSON字段存储复杂数据结构

### 前端框架：Vue 3 + Element Plus
- **Web端**: Vue 3 + Vite + Element Plus + ECharts
- **移动端**: uni-app + uView UI
- **理由**: 生态成熟、开发效率高、跨平台支持好

### API文档：Knife4j (Swagger增强版)
- **理由**: 界面美观、功能丰富、支持在线调试

### 消息队列：Redis + Spring Boot Starter
- **用途**: 处理视频分析任务队列、实时数据推送

### 文件存储：MinIO
- **用途**: 存储视频文件、图片、分析结果
- **理由**: 兼容S3 API、部署简单、性能好

## 4. 技术架构优势

### 许可证兼容性：
- 大部分组件使用MIT/Apache-2.0等宽松许可
- 需注意YOLO的AGPL-3.0许可（商业使用需考虑）

### 扩展性：
- 模块化设计，便于添加新的行为识别算法
- 支持分布式部署，可扩展到多个鼠笼

### 可维护性：
- 成熟的开源项目，社区支持好
- 详细的文档和示例代码

### 性能考虑：
- 支持GPU加速（CUDA）
- 异步处理机制
- 缓存优化

## 5. 风险评估

### 技术风险：
- **行为识别精度**: 需要大量标注数据和模型调优
- **多目标追踪稳定性**: 在遮挡情况下可能出现ID切换
- **实时性要求**: 需要合理的硬件配置

### 解决方案：
- 采用渐进式开发，先实现基础功能
- 建立完善的测试数据集
- 提供人工校正机制

## 6. 开发建议

### 第一阶段：基础框架
- 搭建基础的检测和追踪系统
- 实现简单的运动状态识别
- 建立数据采集和存储流程

### 第二阶段：行为识别
- 重点攻克咳嗽、挠鼻等关键行为
- 建立标注工具和训练流程
- 优化识别精度

### 第三阶段：系统完善
- 添加更多行为类型
- 完善统计分析功能
- 优化用户体验