# å°é¼ è¡Œä¸ºç›‘æµ‹ç³»ç»Ÿ - ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

## 1. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### 1.1 å½“å‰å®ç°çŠ¶æ€

**å·²å®Œæˆæ¨¡å—ï¼š**
- âœ… åç«¯æœåŠ¡æ¡†æ¶ (Spring Boot + è‹¥ä¾æ¡†æ¶)
- âœ… æ•°æ®åº“è®¾è®¡ (MySQL)
- âœ… ç¼“å­˜ç³»ç»Ÿ (Redis)
- âœ… æ–‡ä»¶å­˜å‚¨ (MinIO)
- âœ… Dockerå®¹å™¨åŒ–éƒ¨ç½²
- âœ… è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- âœ… RESTful APIæ¥å£è§„èŒƒ

**å¼€å‘ä¸­æ¨¡å—ï¼š**
- ğŸ”„ å‰ç«¯ç•Œé¢ä¼˜åŒ–
- ğŸ”„ Excelå¯¼å‡ºåŠŸèƒ½
- ğŸ”„ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–

**å¾…å¼€å‘æ¨¡å—ï¼š**
- â³ Pythonæ•°æ®é‡‡é›†ç«¯
- â³ è¡Œä¸ºè¯†åˆ«ç®—æ³•
- â³ å‰ç«¯Vue.jsåº”ç”¨
- â³ ç§»åŠ¨ç«¯åº”ç”¨

### 1.2 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å°é¼ è¡Œä¸ºç›‘æµ‹ç³»ç»Ÿ v1.0                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å‰ç«¯å±•ç¤ºå±‚ (Presentation Layer) - å¾…å¼€å‘                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Webç®¡ç†ç«¯     â”‚    â”‚   ç§»åŠ¨ç«¯App     â”‚                    â”‚
â”‚  â”‚  (Vue3+Element) â”‚    â”‚   (uni-app)     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸šåŠ¡æœåŠ¡å±‚ (Business Service Layer) - å·²å®Œæˆ                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              Spring Boot åç«¯æœåŠ¡                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚  â”‚  â”‚  ç”¨æˆ·ç®¡ç†   â”‚ â”‚  ç³»ç»Ÿç®¡ç†   â”‚ â”‚  æ•°æ®ç®¡ç†   â”‚          â”‚â”‚
â”‚  â”‚  â”‚   æ¨¡å—     â”‚ â”‚    æ¨¡å—     â”‚ â”‚    æ¨¡å—     â”‚          â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®é‡‡é›†å±‚ (Data Collection Layer) - å¾…å¼€å‘                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚              Pythonæ•°æ®é‡‡é›†ç«¯                               â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚  â”‚  â”‚  è§†é¢‘é‡‡é›†   â”‚ â”‚  è¡Œä¸ºè¯†åˆ«   â”‚ â”‚  æ•°æ®ä¸ŠæŠ¥   â”‚          â”‚â”‚
â”‚  â”‚  â”‚   æ¨¡å—     â”‚ â”‚    æ¨¡å—     â”‚ â”‚    æ¨¡å—     â”‚          â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer) - å·²å®Œæˆ                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   MySQL     â”‚ â”‚    Redis    â”‚ â”‚   MinIO     â”‚              â”‚
â”‚  â”‚  (ç»“æ„åŒ–)   â”‚ â”‚   (ç¼“å­˜)    â”‚ â”‚  (æ–‡ä»¶)     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer) - å·²å®Œæˆ                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚        Dockerå®¹å™¨åŒ– + è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ•°æ®æµå‘å›¾

```mermaid
flowchart TD
    subgraph "å·²å®Œæˆæ¨¡å—"
        G[Spring Bootåç«¯]
        H[æ•°æ®éªŒè¯]
        I[MySQLå­˜å‚¨]
        J[Redisç¼“å­˜]
        K[MinIOæ–‡ä»¶å­˜å‚¨]
        N[æ•°æ®åˆ†æ]
        O[æŠ¥å‘Šç”Ÿæˆ]
    end
    
    subgraph "å¾…å¼€å‘æ¨¡å—"
        A[çº¢å¤–æ‘„åƒå¤´]
        B[Pythoné‡‡é›†ç«¯]
        C[è§†é¢‘é¢„å¤„ç†]
        D[ç›®æ ‡æ£€æµ‹]
        E[è¡Œä¸ºè¯†åˆ«]
        F[æ•°æ®ä¸ŠæŠ¥]
        L[Webå‰ç«¯]
        M[ç§»åŠ¨ç«¯]
        P[ç»“æœå±•ç¤º]
    end
    
    A -.-> B
    B -.-> C
    C -.-> D
    D -.-> E
    E -.-> F
    F -.-> G
    G --> H
    H --> I
    G --> J
    G --> K
    L -.-> G
    M -.-> G
    G --> N
    N --> O
    O -.-> P
    
    style G fill:#90EE90
    style H fill:#90EE90
    style I fill:#90EE90
    style J fill:#90EE90
    style K fill:#90EE90
    style N fill:#90EE90
    style O fill:#90EE90
```

## 2. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 2.1 åç«¯æœåŠ¡ (Spring Boot) - å·²å®Œæˆ

#### 2.1.1 ç³»ç»Ÿç®¡ç†æ¨¡å—

**ç”¨æˆ·ç®¡ç†ï¼š**
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- è§’è‰²åˆ†é…å’Œæƒé™æ§åˆ¶
- ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤

**ç³»ç»Ÿé…ç½®ï¼š**
- ç³»ç»Ÿå‚æ•°é…ç½®
- å­—å…¸æ•°æ®ç®¡ç†
- èœå•æƒé™ç®¡ç†

**æ—¥å¿—ç®¡ç†ï¼š**
- æ“ä½œæ—¥å¿—è®°å½•
- ç™»å½•æ—¥å¿—è¿½è¸ª
- ç³»ç»Ÿå¼‚å¸¸æ—¥å¿—

#### 2.1.2 æ•°æ®ç®¡ç†æ¨¡å—

**æ•°æ®å­˜å‚¨ï¼š**
- MySQLå…³ç³»å‹æ•°æ®å­˜å‚¨
- Redisç¼“å­˜æ•°æ®ç®¡ç†
- MinIOæ–‡ä»¶å­˜å‚¨æœåŠ¡

**æ•°æ®å¯¼å‡ºï¼š**
- Excelæ•°æ®å¯¼å‡ºåŠŸèƒ½
- è‡ªå®šä¹‰å¯¼å‡ºæ¨¡æ¿
- æ‰¹é‡æ•°æ®å¤„ç†

**APIæ¥å£ï¼š**
- RESTful APIè®¾è®¡
- ç»Ÿä¸€å“åº”æ ¼å¼
- æ¥å£æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

### 2.2 æ•°æ®é‡‡é›†ç«¯ (Python) - å¾…å¼€å‘

#### 2.2.1 è§†é¢‘é‡‡é›†æ¨¡å— (VideoCapture)
```python
class VideoCapture:
    """
    è§†é¢‘é‡‡é›†æ¨¡å—
    è´Ÿè´£ä»çº¢å¤–æ‘„åƒå¤´è·å–è§†é¢‘æµ
    """
    def __init__(self, camera_id, resolution=(1920, 1080))
    def start_capture()
    def get_frame()
    def stop_capture()
    def set_night_vision_mode()
```

#### 2.1.2 ç›®æ ‡æ£€æµ‹æ¨¡å— (MouseDetector)
```python
class MouseDetector:
    """
    å°é¼ æ£€æµ‹æ¨¡å—
    åŸºäºYOLOè¿›è¡Œå°é¼ ç›®æ ‡æ£€æµ‹
    """
    def __init__(self, model_path, confidence_threshold=0.5)
    def detect_mice(self, frame)
    def load_custom_model(self, model_path)
    def update_model(self, new_model_path)
```

#### 2.1.3 å¤šç›®æ ‡è¿½è¸ªæ¨¡å— (MouseTracker)
```python
class MouseTracker:
    """
    å¤šç›®æ ‡è¿½è¸ªæ¨¡å—
    åŸºäºDeepSORTè¿›è¡Œå°é¼ è¿½è¸ª
    """
    def __init__(self, max_mice=5)
    def update_tracks(self, detections)
    def get_mouse_trajectories()
    def handle_occlusion()
```

#### 2.1.4 è¡Œä¸ºè¯†åˆ«æ¨¡å— (BehaviorRecognizer)
```python
class BehaviorRecognizer:
    """
    è¡Œä¸ºè¯†åˆ«æ¨¡å—
    è¯†åˆ«ç¡çœ ã€å’³å—½ã€æŒ é¼»ç­‰ç‰¹å®šè¡Œä¸º
    """
    def __init__(self)
    def recognize_sleep(self, mouse_data)
    def recognize_cough(self, mouse_data)
    def recognize_nose_scratching(self, mouse_data)
    def recognize_defecation(self, mouse_data)
    def recognize_convulsion(self, mouse_data)
```

#### 2.1.5 æ•°æ®ä¸ŠæŠ¥æ¨¡å— (DataReporter)
```python
class DataReporter:
    """
    æ•°æ®ä¸ŠæŠ¥æ¨¡å—
    å°†è¯†åˆ«ç»“æœä¸ŠæŠ¥åˆ°åç«¯æœåŠ¡
    """
    def __init__(self, api_endpoint, api_key)
    def report_behavior_data(self, behavior_data)
    def report_heartbeat()
    def handle_network_error()
```

### 2.4 åç«¯æœåŠ¡ (Spring Boot) - å·²å®Œæˆ

#### 2.2.1 ç³»ç»Ÿç®¡ç†æ¥å£
```java
@RestController
@RequestMapping("/system")
public class SystemController {
    // ç”¨æˆ·ç®¡ç†
    @GetMapping("/user/list")
    public TableDataInfo list(SysUser user)
    
    @PostMapping("/user")
    public AjaxResult add(@RequestBody SysUser user)
    
    @PutMapping("/user")
    public AjaxResult edit(@RequestBody SysUser user)
    
    @DeleteMapping("/user/{userIds}")
    public AjaxResult remove(@PathVariable Long[] userIds)
}
```

#### 2.2.2 æ•°æ®å¯¼å‡ºæ¥å£
```java
@RestController
@RequestMapping("/export")
public class ExportController {
    // Excelå¯¼å‡º
    @PostMapping("/excel")
    public void export(HttpServletResponse response, @RequestBody ExportRequest request)
    
    // æ•°æ®æŸ¥è¯¢
    @GetMapping("/data")
    public TableDataInfo getData(@RequestParam Map<String, Object> params)
    
    // æ¨¡æ¿ä¸‹è½½
    @GetMapping("/template/{templateName}")
    public void downloadTemplate(@PathVariable String templateName, HttpServletResponse response)
}
```

#### 2.2.3 æ–‡ä»¶ç®¡ç†æœåŠ¡
```java
@Service
public class FileService {
    // MinIOæ–‡ä»¶ä¸Šä¼ 
    public String uploadFile(MultipartFile file, String bucketName)
    
    // æ–‡ä»¶ä¸‹è½½
    public InputStream downloadFile(String fileName, String bucketName)
    
    // æ–‡ä»¶åˆ é™¤
    public boolean deleteFile(String fileName, String bucketName)
    
    // è·å–æ–‡ä»¶è®¿é—®URL
    public String getFileUrl(String fileName, String bucketName)
}
```

#### 2.2.4 å¾…å¼€å‘æ¥å£ï¼ˆé¢„ç•™ï¼‰
```java
// è®¾å¤‡ç®¡ç†æ¥å£ï¼ˆå¾…å¼€å‘ï¼‰
@RestController
@RequestMapping("/api/devices")
public class DeviceController {
    // è®¾å¤‡æ³¨å†Œ
    @PostMapping("/register")
    public Result registerDevice(@RequestBody DeviceRegisterDTO dto)
    
    // è®¾å¤‡çŠ¶æ€æ›´æ–°
    @PutMapping("/{deviceId}/status")
    public Result updateDeviceStatus(@PathVariable String deviceId, @RequestBody DeviceStatusDTO dto)
    
    // è·å–è®¾å¤‡åˆ—è¡¨
    @GetMapping
    public Result<List<DeviceVO>> getDeviceList()
}

// æ•°æ®æ¥æ”¶æ¥å£ï¼ˆå¾…å¼€å‘ï¼‰
@RestController
@RequestMapping("/api/data")
public class DataController {
    // æ¥æ”¶è¡Œä¸ºæ•°æ®
    @PostMapping("/behavior")
    public Result receiveBehaviorData(@RequestBody BehaviorDataDTO dto)
    
    // æ‰¹é‡æ¥æ”¶æ•°æ®
    @PostMapping("/behavior/batch")
    public Result receiveBehaviorDataBatch(@RequestBody List<BehaviorDataDTO> dtoList)
    
    // æ¥æ”¶å¿ƒè·³æ•°æ®
    @PostMapping("/heartbeat")
    public Result receiveHeartbeat(@RequestBody HeartbeatDTO dto)
}
```

### 2.3 å‰ç«¯æ¨¡å— (Vue 3) - å¾…å¼€å‘

#### 2.3.1 æŠ€æœ¯é€‰å‹

**å‰ç«¯æ¡†æ¶ï¼š**
- Vue 3 - ä¸»æ¡†æ¶
- Element Plus - UIç»„ä»¶åº“
- Vue Router - è·¯ç”±ç®¡ç†
- Pinia - çŠ¶æ€ç®¡ç†
- Axios - HTTPå®¢æˆ·ç«¯

**å¼€å‘å·¥å…·ï¼š**
- Vite - æ„å»ºå·¥å…·
- TypeScript - ç±»å‹æ”¯æŒ
- ESLint - ä»£ç æ£€æŸ¥
- Prettier - ä»£ç æ ¼å¼åŒ–

#### 2.3.2 é¡µé¢ç»“æ„è®¾è®¡

**ä¸»è¦é¡µé¢ï¼š**
- ç™»å½•é¡µé¢ - ç”¨æˆ·èº«ä»½è®¤è¯
- é¦–é¡µä»ªè¡¨æ¿ - ç³»ç»Ÿæ¦‚è§ˆ
- ç”¨æˆ·ç®¡ç† - ç”¨æˆ·ä¿¡æ¯ç»´æŠ¤
- è§’è‰²ç®¡ç† - æƒé™è§’è‰²é…ç½®
- èœå•ç®¡ç† - ç³»ç»Ÿèœå•é…ç½®
- æ•°æ®å¯¼å‡º - Excelå¯¼å‡ºåŠŸèƒ½
- ç³»ç»Ÿç›‘æ§ - ç³»ç»ŸçŠ¶æ€ç›‘æ§
- æ“ä½œæ—¥å¿— - ç”¨æˆ·æ“ä½œè®°å½•

**å¾…å¼€å‘é¡µé¢ï¼š**
- è®¾å¤‡ç®¡ç† - ç›‘æ§è®¾å¤‡ç®¡ç†
- å®æ—¶ç›‘æ§ - è§†é¢‘æµç›‘æ§
- æ•°æ®åˆ†æ - è¡Œä¸ºæ•°æ®åˆ†æ
- æŠ¥å‘Šç”Ÿæˆ - åˆ†ææŠ¥å‘Šç”Ÿæˆ

#### 2.3.3 ç»„ä»¶è®¾è®¡

**åŸºç¡€ç»„ä»¶ï¼š**
```vue
<!-- æ•°æ®è¡¨æ ¼ç»„ä»¶ -->
<template>
  <div class="table-container">
    <el-table :data="tableData" v-loading="loading">
      <el-table-column v-for="column in columns" :key="column.prop" v-bind="column" />
    </el-table>
    <pagination v-if="showPagination" :total="total" @pagination="handlePagination" />
  </div>
</template>

<!-- è¡¨å•ç»„ä»¶ -->
<template>
  <el-form :model="form" :rules="rules" ref="formRef">
    <el-form-item v-for="field in fields" :key="field.prop" v-bind="field">
      <component :is="field.component" v-model="form[field.prop]" v-bind="field.props" />
    </el-form-item>
  </el-form>
</template>

<!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->
<template>
  <el-upload
    :action="uploadUrl"
    :headers="headers"
    :on-success="handleSuccess"
    :on-error="handleError"
  >
    <el-button type="primary">ç‚¹å‡»ä¸Šä¼ </el-button>
  </el-upload>
</template>
```

## 3. å…³é”®æ¥å£å®šä¹‰

### 3.1 å½“å‰å·²å®ç°æ¥å£

#### 3.1.1 ç”¨æˆ·ç®¡ç†æ¥å£

**ç”¨æˆ·ç™»å½•ï¼š** `POST /login`
```json
// è¯·æ±‚å‚æ•°
{
  "username": "admin",
  "password": "admin123",
  "code": "1234",
  "uuid": "uuid-string"
}

// å“åº”æ ¼å¼
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "token": "eyJhbGciOiJIUzUxMiJ9..."
}
```

**è·å–ç”¨æˆ·ä¿¡æ¯ï¼š** `GET /getInfo`
```json
// å“åº”æ ¼å¼
{
  "code": 200,
  "msg": "æ“ä½œæˆåŠŸ",
  "data": {
    "user": {
      "userId": 1,
      "userName": "admin",
      "nickName": "ç®¡ç†å‘˜"
    },
    "roles": ["admin"],
    "permissions": ["*:*:*"]
  }
}
```

#### 3.1.2 ç³»ç»Ÿç®¡ç†æ¥å£

**è·å–ç”¨æˆ·åˆ—è¡¨ï¼š** `GET /system/user/list`
```json
// å“åº”æ ¼å¼
{
  "code": 200,
  "msg": "æŸ¥è¯¢æˆåŠŸ",
  "rows": [
    {
      "userId": 1,
      "userName": "admin",
      "nickName": "ç®¡ç†å‘˜",
      "email": "admin@example.com",
      "status": "0",
      "createTime": "2024-01-15 10:30:00"
    }
  ],
  "total": 1
}
```

**æ•°æ®å¯¼å‡ºæ¥å£ï¼š** `POST /export/excel`
```json
// è¯·æ±‚å‚æ•°
{
  "tableName": "sys_user",
  "columns": ["userName", "nickName", "email"],
  "conditions": {
    "status": "0"
  }
}

// å“åº”ï¼šExcelæ–‡ä»¶æµ
```

### 3.2 å¾…å¼€å‘æ¥å£ï¼ˆé¢„ç•™è®¾è®¡ï¼‰

#### 3.2.1 è®¾å¤‡ç®¡ç†æ¥å£

**è®¾å¤‡æ³¨å†Œï¼š** `POST /api/device/register`
```json
{
  "deviceId": "device_001",
  "deviceName": "ç›‘æ§è®¾å¤‡1",
  "location": "å®éªŒå®¤A",
  "deviceType": "camera"
}
```

**è®¾å¤‡å¿ƒè·³ï¼š** `POST /api/device/heartbeat`
```json
{
  "deviceId": "device_001",
  "timestamp": "2024-01-15T10:30:00Z",
  "status": "online",
  "systemInfo": {
    "cpuUsage": 45.2,
    "memoryUsage": 67.8
  }
}
```

#### 3.2.2 æ•°æ®é‡‡é›†æ¥å£

**è¡Œä¸ºæ•°æ®ä¸ŠæŠ¥ï¼š** `POST /api/data/behavior`
```json
{
  "deviceId": "device_001",
  "timestamp": "2024-01-15T10:30:00Z",
  "cageId": "cage_001",
  "mouseData": [
    {
      "mouseId": "mouse_001",
      "position": {
        "x": 150.5,
        "y": 200.3
      },
      "behaviors": [
        {
          "type": "COUGH",
          "confidence": 0.85,
          "duration": 2.5,
          "startTime": "2024-01-15T10:30:00Z",
          "endTime": "2024-01-15T10:30:02.5Z"
        }
      ]
    }
  ],
  "environmentData": {
    "temperature": 22.5,
    "humidity": 60.2,
    "lightLevel": 0.1
  }
}
```

### 3.2 æ•°æ®æŸ¥è¯¢API

#### 3.2.1 è¡Œä¸ºç»Ÿè®¡æŸ¥è¯¢
```json
GET /api/analysis/behavior-statistics
Authorization: Bearer {token}

Query Parameters:
- deviceId: string (required)
- startTime: datetime (required)
- endTime: datetime (required)
- behaviorTypes: array[string] (optional)
- mouseIds: array[string] (optional)

Response:
{
  "code": 200,
  "message": "success",
  "data": {
    "totalCount": 150,
    "behaviorCounts": {
      "COUGH": 45,
      "NOSE_SCRATCH": 32,
      "SLEEP": 73
    },
    "mouseStatistics": [
      {
        "mouseId": "mouse_001",
        "behaviorCounts": {
          "COUGH": 12,
          "NOSE_SCRATCH": 8,
          "SLEEP": 15
        }
      }
    ],
    "timeDistribution": [
      {
        "hour": 0,
        "count": 8
      }
    ]
  }
}
```

### 3.3 WebSocketå®æ—¶æ¨é€

#### 3.3.1 å®æ—¶è¡Œä¸ºæ¨é€
```json
// WebSocketè¿æ¥: ws://localhost:8080/ws/realtime
// æ¶ˆæ¯æ ¼å¼:
{
  "type": "BEHAVIOR_DETECTED",
  "data": {
    "deviceId": "device_001",
    "mouseId": "mouse_001",
    "behavior": {
      "type": "COUGH",
      "confidence": 0.85,
      "timestamp": "2024-01-15T10:30:00Z"
    }
  }
}
```

## 4. æ•°æ®åº“è®¾è®¡

### 4.1 æ ¸å¿ƒè¡¨ç»“æ„

#### 4.1.1 è®¾å¤‡è¡¨ (t_device)
```sql
CREATE TABLE t_device (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'è®¾å¤‡ID',
    device_name VARCHAR(100) NOT NULL COMMENT 'è®¾å¤‡åç§°',
    device_type VARCHAR(50) DEFAULT 'CAMERA' COMMENT 'è®¾å¤‡ç±»å‹',
    location VARCHAR(200) COMMENT 'è®¾å¤‡ä½ç½®',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    port INT COMMENT 'ç«¯å£å·',
    status VARCHAR(20) DEFAULT 'OFFLINE' COMMENT 'è®¾å¤‡çŠ¶æ€:ONLINE,OFFLINE,ERROR,MAINTENANCE',
    last_heartbeat DATETIME COMMENT 'æœ€åå¿ƒè·³æ—¶é—´',
    hardware_info JSON COMMENT 'ç¡¬ä»¶ä¿¡æ¯',
    config_info JSON COMMENT 'é…ç½®ä¿¡æ¯',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_device_id (device_id),
    INDEX idx_status (status),
    INDEX idx_created_time (created_time)
);
```

#### 4.1.2 é¼ ç¬¼è¡¨ (t_cage)
```sql
CREATE TABLE t_cage (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    cage_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'é¼ ç¬¼ID',
    device_id VARCHAR(50) NOT NULL COMMENT 'å…³è”è®¾å¤‡ID',
    cage_name VARCHAR(100) NOT NULL COMMENT 'é¼ ç¬¼åç§°',
    cage_type VARCHAR(50) COMMENT 'é¼ ç¬¼ç±»å‹',
    mouse_count INT DEFAULT 0 COMMENT 'å°é¼ æ•°é‡',
    max_mouse_count INT DEFAULT 5 COMMENT 'æœ€å¤§å°é¼ æ•°é‡',
    experiment_group VARCHAR(100) COMMENT 'å®éªŒç»„åˆ«',
    experiment_id VARCHAR(100) COMMENT 'å®éªŒID',
    environment_info JSON COMMENT 'ç¯å¢ƒä¿¡æ¯(æ¸©åº¦ã€æ¹¿åº¦ç­‰)',
    cage_size JSON COMMENT 'é¼ ç¬¼å°ºå¯¸ä¿¡æ¯',
    status VARCHAR(20) DEFAULT 'ACTIVE' COMMENT 'çŠ¶æ€:ACTIVE,INACTIVE,MAINTENANCE',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_cage_id (cage_id),
    INDEX idx_device_id (device_id),
    INDEX idx_experiment_group (experiment_group),
    INDEX idx_status (status)
);
```

#### 4.1.3 å°é¼ è¡¨ (t_mouse)
```sql
CREATE TABLE t_mouse (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    mouse_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'å°é¼ ID',
    cage_id VARCHAR(50) NOT NULL COMMENT 'æ‰€å±é¼ ç¬¼ID',
    mouse_name VARCHAR(100) COMMENT 'å°é¼ åç§°',
    mouse_code VARCHAR(50) COMMENT 'å°é¼ ç¼–å·',
    gender VARCHAR(10) COMMENT 'æ€§åˆ«:MALE,FEMALE,UNKNOWN',
    age_weeks INT COMMENT 'å‘¨é¾„',
    weight_grams DECIMAL(6,2) COMMENT 'ä½“é‡(å…‹)',
    strain VARCHAR(50) COMMENT 'å“ç³»',
    source VARCHAR(100) COMMENT 'æ¥æº',
    birth_date DATE COMMENT 'å‡ºç”Ÿæ—¥æœŸ',
    entry_date DATE COMMENT 'å…¥ç¬¼æ—¥æœŸ',
    health_status VARCHAR(20) DEFAULT 'HEALTHY' COMMENT 'å¥åº·çŠ¶æ€:HEALTHY,SICK,DEAD',
    tracking_color VARCHAR(20) COMMENT 'è¿½è¸ªæ ‡è¯†é¢œè‰²',
    notes TEXT COMMENT 'å¤‡æ³¨ä¿¡æ¯',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_mouse_id (mouse_id),
    INDEX idx_cage_id (cage_id),
    INDEX idx_health_status (health_status),
    INDEX idx_strain (strain)
);
```

#### 4.1.4 è¡Œä¸ºæ•°æ®è¡¨ (t_behavior_data)
```sql
CREATE TABLE t_behavior_data (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    device_id VARCHAR(50) NOT NULL COMMENT 'è®¾å¤‡ID',
    cage_id VARCHAR(50) NOT NULL COMMENT 'é¼ ç¬¼ID',
    mouse_id VARCHAR(50) NOT NULL COMMENT 'å°é¼ ID',
    behavior_type VARCHAR(50) NOT NULL COMMENT 'è¡Œä¸ºç±»å‹:SLEEP,COUGH,NOSE_SCRATCH,DEFECATION,CONVULSION,MOVEMENT,EATING,DRINKING',
    behavior_subtype VARCHAR(50) COMMENT 'è¡Œä¸ºå­ç±»å‹',
    confidence DECIMAL(5,4) NOT NULL COMMENT 'ç½®ä¿¡åº¦(0-1)',
    duration_seconds DECIMAL(10,3) COMMENT 'æŒç»­æ—¶é—´(ç§’)',
    position_x DECIMAL(10,3) COMMENT 'Xåæ ‡',
    position_y DECIMAL(10,3) COMMENT 'Yåæ ‡',
    bounding_box JSON COMMENT 'è¾¹ç•Œæ¡†ä¿¡æ¯',
    start_time DATETIME NOT NULL COMMENT 'å¼€å§‹æ—¶é—´',
    end_time DATETIME COMMENT 'ç»“æŸæ—¶é—´',
    frame_start INT COMMENT 'å¼€å§‹å¸§å·',
    frame_end INT COMMENT 'ç»“æŸå¸§å·',
    video_file_path VARCHAR(500) COMMENT 'è§†é¢‘æ–‡ä»¶è·¯å¾„',
    image_file_path VARCHAR(500) COMMENT 'æˆªå›¾æ–‡ä»¶è·¯å¾„',
    additional_data JSON COMMENT 'é¢å¤–æ•°æ®',
    is_verified TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦å·²éªŒè¯:0-å¦,1-æ˜¯',
    verified_by BIGINT COMMENT 'éªŒè¯äººID',
    verified_time DATETIME COMMENT 'éªŒè¯æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_device_time (device_id, start_time),
    INDEX idx_cage_time (cage_id, start_time),
    INDEX idx_mouse_behavior (mouse_id, behavior_type),
    INDEX idx_time_range (start_time, end_time),
    INDEX idx_behavior_type (behavior_type),
    INDEX idx_confidence (confidence),
    INDEX idx_verified (is_verified)
);
```

#### 4.1.5 å®éªŒé¡¹ç›®è¡¨ (t_experiment)
```sql
CREATE TABLE t_experiment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    experiment_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'å®éªŒID',
    experiment_name VARCHAR(200) NOT NULL COMMENT 'å®éªŒåç§°',
    experiment_type VARCHAR(50) COMMENT 'å®éªŒç±»å‹',
    description TEXT COMMENT 'å®éªŒæè¿°',
    principal_investigator VARCHAR(100) COMMENT 'ä¸»è¦ç ”ç©¶è€…',
    start_date DATE COMMENT 'å¼€å§‹æ—¥æœŸ',
    end_date DATE COMMENT 'ç»“æŸæ—¥æœŸ',
    status VARCHAR(20) DEFAULT 'PLANNING' COMMENT 'çŠ¶æ€:PLANNING,RUNNING,PAUSED,COMPLETED,CANCELLED',
    protocol_file_path VARCHAR(500) COMMENT 'å®éªŒæ–¹æ¡ˆæ–‡ä»¶è·¯å¾„',
    approval_number VARCHAR(100) COMMENT 'ä¼¦ç†å®¡æ‰¹å·',
    funding_source VARCHAR(200) COMMENT 'èµ„åŠ©æ¥æº',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_experiment_id (experiment_id),
    INDEX idx_status (status),
    INDEX idx_date_range (start_date, end_date)
);
```

#### 4.1.6 ç”¨æˆ·è¡¨ (t_user)
```sql
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL COMMENT 'ç”¨æˆ·å',
    password VARCHAR(255) NOT NULL COMMENT 'å¯†ç (åŠ å¯†)',
    real_name VARCHAR(100) COMMENT 'çœŸå®å§“å',
    email VARCHAR(100) COMMENT 'é‚®ç®±',
    phone VARCHAR(20) COMMENT 'ç”µè¯',
    department VARCHAR(100) COMMENT 'éƒ¨é—¨',
    role VARCHAR(50) DEFAULT 'USER' COMMENT 'è§’è‰²:ADMIN,RESEARCHER,OPERATOR,VIEWER',
    status VARCHAR(20) DEFAULT 'ACTIVE' COMMENT 'çŠ¶æ€:ACTIVE,INACTIVE,LOCKED',
    last_login_time DATETIME COMMENT 'æœ€åç™»å½•æ—¶é—´',
    last_login_ip VARCHAR(45) COMMENT 'æœ€åç™»å½•IP',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_username (username),
    INDEX idx_email (email),
    INDEX idx_role (role),
    INDEX idx_status (status)
);
```

#### 4.1.7 æ ‡æ³¨ä»»åŠ¡è¡¨ (t_annotation_task)
```sql
CREATE TABLE t_annotation_task (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'ä»»åŠ¡ID',
    task_name VARCHAR(200) NOT NULL COMMENT 'ä»»åŠ¡åç§°',
    task_type VARCHAR(50) COMMENT 'ä»»åŠ¡ç±»å‹:VIDEO_ANNOTATION,BEHAVIOR_ANNOTATION,QUALITY_CHECK',
    description TEXT COMMENT 'ä»»åŠ¡æè¿°',
    video_file_path VARCHAR(500) COMMENT 'è§†é¢‘æ–‡ä»¶è·¯å¾„',
    start_frame INT COMMENT 'å¼€å§‹å¸§',
    end_frame INT COMMENT 'ç»“æŸå¸§',
    assigned_to BIGINT COMMENT 'åˆ†é…ç»™ç”¨æˆ·ID',
    priority VARCHAR(20) DEFAULT 'NORMAL' COMMENT 'ä¼˜å…ˆçº§:HIGH,NORMAL,LOW',
    status VARCHAR(20) DEFAULT 'PENDING' COMMENT 'çŠ¶æ€:PENDING,IN_PROGRESS,COMPLETED,REJECTED',
    deadline DATETIME COMMENT 'æˆªæ­¢æ—¶é—´',
    completed_time DATETIME COMMENT 'å®Œæˆæ—¶é—´',
    quality_score DECIMAL(3,2) COMMENT 'è´¨é‡è¯„åˆ†(0-10)',
    notes TEXT COMMENT 'å¤‡æ³¨',
    created_by BIGINT COMMENT 'åˆ›å»ºäººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_task_id (task_id),
    INDEX idx_assigned_to (assigned_to),
    INDEX idx_status (status),
    INDEX idx_deadline (deadline)
);
```

#### 4.1.8 æ ‡æ³¨ç»“æœè¡¨ (t_annotation_result)
```sql
CREATE TABLE t_annotation_result (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_id VARCHAR(50) NOT NULL COMMENT 'ä»»åŠ¡ID',
    mouse_id VARCHAR(50) COMMENT 'å°é¼ ID',
    behavior_type VARCHAR(50) NOT NULL COMMENT 'è¡Œä¸ºç±»å‹',
    start_frame INT NOT NULL COMMENT 'å¼€å§‹å¸§',
    end_frame INT NOT NULL COMMENT 'ç»“æŸå¸§',
    start_time DATETIME NOT NULL COMMENT 'å¼€å§‹æ—¶é—´',
    end_time DATETIME NOT NULL COMMENT 'ç»“æŸæ—¶é—´',
    position_data JSON COMMENT 'ä½ç½®æ•°æ®',
    annotation_data JSON COMMENT 'æ ‡æ³¨æ•°æ®',
    annotator_id BIGINT NOT NULL COMMENT 'æ ‡æ³¨å‘˜ID',
    annotation_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'æ ‡æ³¨æ—¶é—´',
    is_verified TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦å·²éªŒè¯',
    verified_by BIGINT COMMENT 'éªŒè¯äººID',
    verified_time DATETIME COMMENT 'éªŒè¯æ—¶é—´',
    INDEX idx_task_id (task_id),
    INDEX idx_mouse_id (mouse_id),
    INDEX idx_behavior_type (behavior_type),
    INDEX idx_annotator (annotator_id),
    INDEX idx_time_range (start_time, end_time)
);
```

#### 4.1.9 ç³»ç»Ÿæ—¥å¿—è¡¨ (t_system_log)
```sql
CREATE TABLE t_system_log (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    log_type VARCHAR(50) NOT NULL COMMENT 'æ—¥å¿—ç±»å‹:LOGIN,OPERATION,ERROR,SYSTEM',
    user_id BIGINT COMMENT 'ç”¨æˆ·ID',
    module VARCHAR(100) COMMENT 'æ¨¡å—åç§°',
    operation VARCHAR(200) COMMENT 'æ“ä½œæè¿°',
    request_url VARCHAR(500) COMMENT 'è¯·æ±‚URL',
    request_method VARCHAR(10) COMMENT 'è¯·æ±‚æ–¹æ³•',
    request_params TEXT COMMENT 'è¯·æ±‚å‚æ•°',
    response_data TEXT COMMENT 'å“åº”æ•°æ®',
    ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
    user_agent TEXT COMMENT 'ç”¨æˆ·ä»£ç†',
    execution_time INT COMMENT 'æ‰§è¡Œæ—¶é—´(æ¯«ç§’)',
    status VARCHAR(20) COMMENT 'çŠ¶æ€:SUCCESS,FAILED,ERROR',
    error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_log_type (log_type),
    INDEX idx_user_id (user_id),
    INDEX idx_created_time (created_time),
    INDEX idx_status (status)
);
```

#### 4.1.10 æ–‡ä»¶ç®¡ç†è¡¨ (t_file_info)
```sql
CREATE TABLE t_file_info (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    file_id VARCHAR(50) UNIQUE NOT NULL COMMENT 'æ–‡ä»¶ID',
    file_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶å',
    file_type VARCHAR(50) COMMENT 'æ–‡ä»¶ç±»å‹:VIDEO,IMAGE,DOCUMENT,DATA',
    file_size BIGINT COMMENT 'æ–‡ä»¶å¤§å°(å­—èŠ‚)',
    file_path VARCHAR(500) NOT NULL COMMENT 'æ–‡ä»¶è·¯å¾„',
    file_url VARCHAR(500) COMMENT 'æ–‡ä»¶è®¿é—®URL',
    mime_type VARCHAR(100) COMMENT 'MIMEç±»å‹',
    md5_hash VARCHAR(32) COMMENT 'MD5å“ˆå¸Œå€¼',
    related_id VARCHAR(50) COMMENT 'å…³è”ID(è®¾å¤‡ã€é¼ ç¬¼ã€å°é¼ ç­‰)',
    related_type VARCHAR(50) COMMENT 'å…³è”ç±»å‹',
    upload_by BIGINT COMMENT 'ä¸Šä¼ äººID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤:0-å¦,1-æ˜¯',
    INDEX idx_file_id (file_id),
    INDEX idx_file_type (file_type),
    INDEX idx_related (related_id, related_type),
    INDEX idx_upload_by (upload_by),
    INDEX idx_created_time (created_time)
);
```

## 5. éƒ¨ç½²æ¶æ„

### 5.1 Dockerå®¹å™¨åŒ–éƒ¨ç½²

#### 5.1.1 ç”Ÿäº§ç¯å¢ƒDockeréƒ¨ç½²æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Host (Linux/Windows)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                Docker Compose æœåŠ¡æ ˆ                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚   Nginx     â”‚  â”‚Spring Boot  â”‚  â”‚   MySQL     â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  (å‰ç«¯)     â”‚  â”‚  (åç«¯)     â”‚  â”‚  (æ•°æ®åº“)   â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  Port:80    â”‚  â”‚  Port:8080  â”‚  â”‚  Port:3306  â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚   Redis     â”‚  â”‚   MinIO     â”‚  â”‚  æ ‡æ³¨å·¥å…·    â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  (ç¼“å­˜)     â”‚  â”‚  (æ–‡ä»¶)     â”‚  â”‚  (CVAT)     â”‚        â”‚ â”‚
â”‚  â”‚  â”‚  Port:6379  â”‚  â”‚  Port:9000  â”‚  â”‚  Port:8081  â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   æ•°æ®å·æŒ‚è½½                                â”‚ â”‚
â”‚  â”‚  â€¢ /data/mysql     -> MySQLæ•°æ®æŒä¹…åŒ–                      â”‚ â”‚
â”‚  â”‚  â€¢ /data/redis     -> Redisæ•°æ®æŒä¹…åŒ–                      â”‚ â”‚
â”‚  â”‚  â€¢ /data/minio     -> MinIOæ–‡ä»¶å­˜å‚¨                        â”‚ â”‚
â”‚  â”‚  â€¢ /data/videos    -> è§†é¢‘æ–‡ä»¶å­˜å‚¨                         â”‚ â”‚
â”‚  â”‚  â€¢ /data/logs      -> åº”ç”¨æ—¥å¿—å­˜å‚¨                         â”‚ â”‚
â”‚  â”‚  â€¢ /data/config    -> é…ç½®æ–‡ä»¶å­˜å‚¨                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¤–éƒ¨é‡‡é›†ç«¯ (ç‹¬ç«‹éƒ¨ç½²)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‡‡é›†ç«¯1    â”‚  â”‚  é‡‡é›†ç«¯2    â”‚  â”‚  é‡‡é›†ç«¯N    â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚  Python     â”‚  â”‚  Python     â”‚  â”‚  Python     â”‚
â”‚  Camera     â”‚  â”‚  Camera     â”‚  â”‚  Camera     â”‚
â”‚  GPU        â”‚  â”‚  GPU        â”‚  â”‚  GPU        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                   HTTP/WebSocket
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  Docker Host  â”‚
                â”‚   (æœåŠ¡ç«¯)    â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.1.2 å¼€å‘ç¯å¢ƒéƒ¨ç½²é€‰æ‹©

**æ–¹æ¡ˆä¸€ï¼šå®Œå…¨DockeråŒ–å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰**

**ä¼˜åŠ¿ï¼š**
- ç¯å¢ƒä¸€è‡´æ€§ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´
- å¿«é€Ÿå¯åŠ¨ï¼šä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
- ä¾èµ–éš”ç¦»ï¼šé¿å…æœ¬åœ°ç¯å¢ƒæ±¡æŸ“
- å›¢é˜Ÿåä½œï¼šæ–°æˆå‘˜å¿«é€Ÿä¸Šæ‰‹
- ç‰ˆæœ¬æ§åˆ¶ï¼šDockeré•œåƒç‰ˆæœ¬åŒ–ç®¡ç†

**åŠ£åŠ¿ï¼š**
- è°ƒè¯•å¤æ‚åº¦ç¨é«˜
- èµ„æºå ç”¨ç›¸å¯¹è¾ƒå¤§

**æ–¹æ¡ˆäºŒï¼šæ··åˆå¼€å‘ç¯å¢ƒ**
- MySQLã€Redisåœ¨Dockerä¸­è¿è¡Œ
- Spring Bootåœ¨IDEä¸­ç›´æ¥è¿è¡Œ
- å‰ç«¯åœ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨è¿è¡Œ

**æ¨èä½¿ç”¨æ–¹æ¡ˆä¸€çš„ç†ç”±ï¼š**
1. **é¿å…ç¯å¢ƒé…ç½®åœ°ç‹±**ï¼šMySQLç‰ˆæœ¬ã€Redisç‰ˆæœ¬ã€Javaç‰ˆæœ¬ç­‰ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜
2. **å¿«é€Ÿç¯å¢ƒé‡å»º**ï¼šç³»ç»Ÿå´©æºƒæˆ–æ›´æ¢å¼€å‘æœºå™¨æ—¶ï¼Œå‡ åˆ†é’Ÿå†…æ¢å¤å¼€å‘ç¯å¢ƒ
3. **ç”Ÿäº§ç¯å¢ƒä¸€è‡´æ€§**ï¼šå‡å°‘"åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘"çš„é—®é¢˜
4. **CI/CDå‹å¥½**ï¼šæŒç»­é›†æˆç¯å¢ƒä¸å¼€å‘ç¯å¢ƒä¸€è‡´
5. **å›¢é˜Ÿåä½œæ•ˆç‡**ï¼šæ–°æˆå‘˜åªéœ€è¦Dockerå³å¯å¼€å§‹å¼€å‘

### 5.2 Docker Composeé…ç½®ç¤ºä¾‹

```yaml
# docker-compose.yml
version: '3.8'

services:
  # MySQLæ•°æ®åº“
  mysql:
    image: mysql:8.0
    container_name: mouse-mysql
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: mouse_monitor
      MYSQL_USER: mouse_user
      MYSQL_PASSWORD: mouse_pass
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
      - ./sql/init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - mouse-network

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: mouse-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - mouse-network

  # MinIOæ–‡ä»¶å­˜å‚¨
  minio:
    image: minio/minio:latest
    container_name: mouse-minio
    environment:
      MINIO_ROOT_USER: admin
      MINIO_ROOT_PASSWORD: admin123
    ports:
      - "9000:9000"
      - "9001:9001"
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"
    networks:
      - mouse-network

  # Spring Bootåç«¯
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: mouse-backend
    environment:
      SPRING_PROFILES_ACTIVE: docker
      MYSQL_HOST: mysql
      REDIS_HOST: redis
      MINIO_HOST: minio
    ports:
      - "8080:8080"
    depends_on:
      - mysql
      - redis
      - minio
    volumes:
      - ./logs:/app/logs
      - ./data/videos:/app/videos
    networks:
      - mouse-network

  # Nginxå‰ç«¯
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: mouse-frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    networks:
      - mouse-network

  # CVATæ ‡æ³¨å·¥å…·
  cvat:
    image: openvino/cvat_server:latest
    container_name: mouse-cvat
    environment:
      DJANGO_MODWSGI_EXTRA_ARGS: ""
      ALLOWED_HOSTS: "*"
    ports:
      - "8081:8080"
    volumes:
      - cvat_data:/home/django/data
      - cvat_keys:/home/django/keys
      - cvat_logs:/home/django/logs
    networks:
      - mouse-network

volumes:
  mysql_data:
  redis_data:
  minio_data:
  cvat_data:
  cvat_keys:
  cvat_logs:

networks:
  mouse-network:
    driver: bridge
```

### 5.3 éƒ¨ç½²è„šæœ¬

#### 5.3.1 ä¸€é”®éƒ¨ç½²è„šæœ¬ (deploy.sh)
```bash
#!/bin/bash

# å°é¼ è¡Œä¸ºç›‘æµ‹ç³»ç»Ÿä¸€é”®éƒ¨ç½²è„šæœ¬

echo "å¼€å§‹éƒ¨ç½²å°é¼ è¡Œä¸ºç›‘æµ‹ç³»ç»Ÿ..."

# æ£€æŸ¥Dockerå’ŒDocker Compose
if ! command -v docker &> /dev/null; then
    echo "é”™è¯¯: Dockeræœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker"
    exit 1
fi

if ! command -v docker-compose &> /dev/null; then
    echo "é”™è¯¯: Docker Composeæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker Compose"
    exit 1
fi

# åˆ›å»ºå¿…è¦çš„ç›®å½•
mkdir -p data/{mysql,redis,minio,videos,logs,config}
mkdir -p sql

# åœæ­¢å¹¶åˆ é™¤ç°æœ‰å®¹å™¨
echo "åœæ­¢ç°æœ‰æœåŠ¡..."
docker-compose down

# æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
echo "æ„å»ºå¹¶å¯åŠ¨æœåŠ¡..."
docker-compose up -d --build

# ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
echo "æ£€æŸ¥æœåŠ¡çŠ¶æ€..."
docker-compose ps

# æ˜¾ç¤ºè®¿é—®åœ°å€
echo ""
echo "éƒ¨ç½²å®Œæˆï¼"
echo "å‰ç«¯è®¿é—®åœ°å€: http://localhost"
echo "åç«¯APIåœ°å€: http://localhost:8080"
echo "MinIOæ§åˆ¶å°: http://localhost:9001"
echo "CVATæ ‡æ³¨å·¥å…·: http://localhost:8081"
echo ""
echo "é»˜è®¤è´¦å·å¯†ç è¯·æŸ¥çœ‹docker-compose.ymlæ–‡ä»¶"
```

## 6. æ€§èƒ½æŒ‡æ ‡

### 6.1 ç³»ç»Ÿæ€§èƒ½è¦æ±‚
- **è§†é¢‘å¤„ç†**: 30fpså®æ—¶å¤„ç†
- **æ£€æµ‹å»¶è¿Ÿ**: <100ms
- **è¯†åˆ«ç²¾åº¦**: >90%
- **å¹¶å‘æ”¯æŒ**: 10ä¸ªè®¾å¤‡åŒæ—¶æ¥å…¥
- **æ•°æ®å­˜å‚¨**: æ”¯æŒTBçº§æ•°æ®å­˜å‚¨

### 6.2 ç¡¬ä»¶é…ç½®å»ºè®®

#### é‡‡é›†ç«¯:
- **CPU**: Intel i7æˆ–AMD Ryzen 7ä»¥ä¸Š
- **GPU**: NVIDIA GTX 1660æˆ–ä»¥ä¸Š(æ”¯æŒCUDA)
- **å†…å­˜**: 16GBä»¥ä¸Š
- **å­˜å‚¨**: 500GB SSD

#### æœåŠ¡ç«¯:
- **CPU**: Intel Xeonæˆ–AMD EPYC
- **å†…å­˜**: 32GBä»¥ä¸Š
- **å­˜å‚¨**: 2TB SSD + 10TB HDD
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘

## 7. å®‰å…¨è®¾è®¡

### 7.1 è®¤è¯æˆæƒ
- JWT Tokenè®¤è¯
- RBACæƒé™æ§åˆ¶
- APIè®¿é—®é™æµ
- æ•°æ®ä¼ è¾“åŠ å¯†(HTTPS/WSS)

### 7.2 æ•°æ®å®‰å…¨
- æ•°æ®åº“è®¿é—®æ§åˆ¶
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- æ“ä½œæ—¥å¿—è®°å½•
- å®šæœŸæ•°æ®å¤‡ä»½

### 7.3 ç½‘ç»œå®‰å…¨
- é˜²ç«å¢™é…ç½®
- VPNè®¿é—®æ§åˆ¶
- å…¥ä¾µæ£€æµ‹
- å®‰å…¨æ¼æ´æ‰«æ